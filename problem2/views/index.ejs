<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
      // 알레르기 코드 정보를 전역 변수로 설정
      window.ALLERGY_CODES = JSON.parse('<%- JSON.stringify(ALLERGY_CODES || {}) %>');
    </script>
  </head>
  <body>
    <header>
      <h1><i class="fas fa-utensils"></i> <%= title %></h1>
    </header>
    
    <div class="container search-container">
      <div class="form-group">
        <label for="schoolName"><i class="fas fa-school"></i> 학교 이름</label>
        <input type="text" id="schoolName" placeholder="예: 한일고등학교" required>
      </div>
      
      <div class="form-group">
        <label for="month"><i class="far fa-calendar-alt"></i> 조회 월</label>
        <input type="month" id="month">
        <small>(선택하지 않으면 현재 월 기준으로 조회합니다)</small>
      </div>
      
      <button onclick="searchMeals()"><i class="fas fa-search"></i> 급식 정보 조회</button>
    </div>
    
    <div id="loading" class="loading" style="display:none;">
      <div class="spinner"></div>
      <p>급식 정보를 불러오는 중입니다...</p>
    </div>
    
    <div id="result" class="container result-container" style="display:none;">
      <div id="schoolInfo" class="school-info"></div>
      <div id="weeklyContainer" class="weekly-container"></div>
    </div>
    
    <div class="allergy-legend">
      <h3><i class="fas fa-exclamation-circle"></i> 알레르기 유발 식품 코드표</h3>
      <div class="allergy-grid" id="allergyGrid"></div>
    </div>
    
    <div class="nutrition-legend container">
      <h3><i class="fas fa-heartbeat"></i> 영양 정보 안내</h3>
      <div class="nutrition-legend-content">
        <p>각 급식에는 다음과 같은 영양 정보가 제공됩니다:</p>
        <ul class="nutrition-legend-list">
          <li><i class="fas fa-fire"></i> <strong>칼로리 정보:</strong> 해당 급식의 칼로리 정보입니다.</li>
          <li><i class="fas fa-apple-alt"></i> <strong>영양 정보:</strong> 해당 급식의 탄수화물, 단백질, 지방 등의 영양소 정보입니다.</li>
          <li><i class="fas fa-map-marker-alt"></i> <strong>원산지 정보:</strong> 주요 식재료의 원산지 정보입니다.</li>
        </ul>
        <p class="nutrition-tip">영양 정보 아이콘에 마우스를 올리면 상세 정보를 확인할 수 있습니다.</p>
      </div>
    </div>
    
    <footer>
      <p>© 2025 학교 급식 정보 서비스 | NEIS Open API 활용</p>
    </footer>
    
    <script src="/javascripts/meal.js"></script>
  </body>
</html>
